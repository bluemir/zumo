<template class="zumo-dialog">
	<style>
	@import url("/static/css/custom-element.css");

	:host {
		position: absolute;
		display: none;
		background: var(--default-background);
		color: var(--default-foreground);
		border: 2px solid green;
		padding: 1rem;
	}
	:host(.show) {
		display: block;

		top: 1rem;
		left: 1rem;
	}
	.title {
		border: none;
	}

	</style>
	<h2>
		<content selector=".title"></content>
	</h2>
	<form>
		<content selector=".body"></content>
		<button class="ok"     type="submit">OK    </button>
		<button class="cancel" type="reset" >Cancel</button>
	</form>
</template>
<script>
(function(template){
	class ZumoDialog extends HTMLElement {
		constructor() {
			super();
			console.debug("create?")
		}
		// callback
		// createdCallback
		// attachedCallback
		// detachedCallback
		// attributeChangedCallback(attrName, oldVal, newVal)

		createdCallback(){
			var shadow = this.createShadowRoot();
			var clone = document.importNode(template.content, true)
			shadow.appendChild(clone);

			this.addEventListener("submit", this._submit.bind(this));
			shadow.querySelector(".cancel").addEventListener("click",  this._reset.bind(this));
		}

		_submit(evt) {
			console.debug("[zumo-dialog:_submit]");
			evt.preventDefault();

			var event = new CustomEvent('ok', {});

			this.dispatchEvent(event);
		}
		_reset(evt) {
			console.debug("[zumo-dialog:_reset]");
			evt.preventDefault();

			var event = new CustomEvent('cancel', {});

			this.dispatchEvent(event);
		}

		show() {
			this.classList.add("show");
		}
		hide() {
			this.classList.remove("show");
		}
		toggle() {
			this.classList.toggle("show");
		}
	}
	document.registerElement('zumo-dialog', ZumoDialog);
})(document.currentScript.ownerDocument.querySelector('template.zumo-dialog'))
</script>
